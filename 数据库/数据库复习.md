# 第一章  数据库概览 

### 数据管理技术发展

1. 文件系统的缺点：（1）：数据共享性差，冗余度大   （2）：数据独立性差
2. 数据库的特点：数据结构化、数据共享性高（冗余度低，易于扩充）、数据独立性高、数据统一管理与控制
3. <font style="color:red">数据库系统（DBS）的组成：数据库+数据库管理系统（DBMS）+数据库管理员+数据库应用程序+用户</font>

### 数据库系统的三级模式结构

###### 数据库系统的三级模式结构：模式+外模式+内模式

> 设计数据库模式是数据库设计的核心

1. <font style="color:red">模式：是数据库中全体数据的逻辑结构和特征的描述，一个数据库仅一个模式（逻辑模式或者概念模式），数据库的**核心**</font>
2. <font style="color:blue">外模式：面向具体应用，是数据库用户所能使用的局部数据的逻辑结构和特征的描述。一个数据库可以有多个外模式（模式的子集）</font>
3. <font style="color:brown">内模式：一个数据库仅一个内模式，主要描述数据库的物理结构和存储方式</font>

###### 数据库的二级映像：外模式/模式+内模式/模式、

1. <font style="color:red">外模式/模式：每个外模式都有一个外模式/模式映像</font>

   > <font style="color:blue">保证了数据的逻辑独立性</font>
   >
   > 当模式发生改变时，只要对外模式/模式映像做相应的修改

2. 内模式/模式：该映像对一个数据库是唯一的

   ><font style="color:green">保证了数据库的物理独立性</font>
   >
   >当数据库的存储结构发生改变时，对模式/内模式做相应的修改即可

数据库系统的三级模式与二级映像具有的**优点**：

1. 保证的数据的独立性
2. 有利于数据共享，减少冗余度
3. 有利于数据的安全性
4. 简化用户接口

### 数据库管理系统

**数据库管理系统的功能**：

1. 有效的组织、存取和维护数据
2. 数据定义（定义数据对象、结构、约束条件）
3. 数据操纵（增删查改）
4. 数据库的事务管理和运行管理
5. 数据库的建立和维护功能
6. 其他功能

### 数据模型（层次模型、网状模型和关系模型）。

数据模型（Data Model）是一种抽象模型，是对现实世界数据特征的抽象；它为数据库系统的信息表示和操作提供必须的抽象框架。根据抽象层次的不同，**数据模型**包括**概念模型、逻辑模型和物理模型**三种。

数据模型在数据库系统中的作用：数据模型是数据库系统的灵魂，数据库的设计与实现都要基于数据模型来开展。

1. 数据模型的选择满足三个方面：能较真实的模拟现实世界、易于理解、便于在计算机上实现

2. 概念数据模型+逻辑数据模型

   

##### 概念数据模型<font style="color:red">（独立于计算机系统）</font>

> 按**用户观点**进行建模
>
> 面向用户，现实世界到机器世界的一个中间层次

1. E-R模型的三要素：实体+属性+联系
2. 实体性+实体集+实体值

##### 逻辑数据模型

> 按计算机系统的观点进对数据进行建模

层次模型，关系模型，网状模型



**物理数据模型**

<font style="color:red">**数据模型的三要素：数据结构+数据操作+数据完整性约束**</font>

> 数据结构：一些逻辑模型
>
> <font style="color:blue">数据操作：两大类，查询和更新（插入，删除和修改）</font>
>
> <font style="color:orange">数据完整性约束：正确性，有效性，相容性</font>

#### 关系模型主要有以下特点：

（1）关系模型建立在严格的数学基础之上。

（2）数据结构简单清晰，用户易懂易用。关系模型的数据结构虽然简单，但却能表达丰富的语义，能够较好地描述现实世界的实体以及实体间的各种联系。

（3）数据物理存取路径对用户是透明的，有更高的数据独立性、更好的数据安全性。







# 第二章  数据关系模型

1. <font style="color:red">五种基本操作：并+差+笛卡尔积+选择+投影</font>

2. <font style="color:blue">自然连接是去除重复列的等值连接（外连接都是基于自然连接）</font>

3. <font style="color:green">自然连接一定是等值连接，等值连接不一定是自然连接</font>

4. <font style="color:brown">数据库最基本的功能是查询功能</font>

5. **数据完整性规则=用户定义完整性+实体完整性+参照完整性**

   （1）实体完整性规则：指关系*R*的主属性不能取空值。

   （2）参照完整性规则：指被参照关系的主码和参照关系的外码必须定义在同一个域上，并且参照关系的外码取值只能是以下两种情       											形之一：① 取空值；② 取被参照关系的主码所取的值。

   （3）用户定义完整性：指针对数据的具体内容定义的数据约束条件，并提供检验机制。

### 名词解释

1. 关系：一个关系（relation）指一张二维表。

   > 一个关系由关系名，关系模式，关系实例组成。分别对应二维表的表名，表头和数据

2. 元组：一个元组（tuple）指二维表中的一行。

3. 属性：一个属性（attribute）二维表中的一列，表中每列均有名称，即属性名。

4. 码：码（key）也称为键、关键字、关键码，指表中可惟一确定元组的属性或属性组合。

   > <font style="color:red">一些码的概念：主码，候选码，外码，超码</font>

5. 域：域（domain）指属性的取值范围。

6. 分量：分量指元组中的一个属性值。

7. 关系模式：关系模式是对关系“型”的描述，通常表示为：关系名（属性1，…，属性n）。







# 第三章  关系数据库语言SQL（嵌入式）

1. <font style="color:blue">SQL是高度非过程化，结构化查询语言，功能：数据定义+数据操纵+数据控制</font>

2. SQL的分类：

   > **数据定义 create,drop,alter**
   >
   > **数据查询 select**
   >
   > **数据操纵 insert,update,delete**
   >
   > **数据控制 grant,revoke,commit,rollback**

3. SQL按组成包括：数据定义+数据操纵+数据控制；按功能包括：组成+数据查询（SQL的核心功能）

4. SQL数据类型：数值+字符+Unicode字符+日期时间+文本+二进制

5. DROP的使用：数据库+视图+基本表+索引+列（不能删除有外码约束所参照的表）

6. Delete用来删除行（元组）

7. 不可以在视图上建立索引

8. 视图的优点：屏蔽数据的复杂性，简化用户操作+简化用户权限管理，增加数据库安全性+便于数据共享+降低数据库重构对用户影响

9. update仅仅用于修改数据行（元组）

10. **什么是索引？定义索引的目的是什么？**

    <font style="color:red">答：数据库的索引是一个数据表的辅助结构，它注明了表中各行数据所在的存储位置。查询是数据库使用最频繁的操作，如何能更快地找到所需数据，是数据库的一项重要任务。在数据库中建立索引是为了提高数据查询速度。</font>

11.  **什么是聚簇索引？**什么是非聚集索引？（一个表可以有多个非聚簇索引，但是只能有一个聚簇索引）

    答：<font style="color:green">**聚簇索引**（Clustered Index）对表的物理数据页中的数据按索引关键字进行排序，然后重新存储到磁盘上，即聚簇索引与数据是一体的。**非聚簇索引**（Nonclustered Index）具有完全独立于数据的索引结构。</font>

12. 基本表：独立存在与数据库的表（实表）

    视图：从一个或者多个基本表中导出的表（虚表）

    存储文件：数据库中所有信息都是保存在存储文件中

    索引：基本表中记录在外存储器上存放的顺序称为记录的物理顺序（**内模式**）

# 第四章

## 数据库设计的含义

广义来说：数据库及其应用系统的设计，即设计整个的数据库应用系统

<font style="color:blue">狭义而言：数据库本身的设计，即设计数据库的各级模式并建立数据库</font>

## 数据库设计的六个阶段

1.需求分析阶段

2.概念结构设计阶段

3.逻辑结构设计阶段

4.物理结构设计阶段

5.数据库实施阶段

6.数据库运行与维护阶段

## 集成局部ER图

**<font style="color:red">集成包括合并和消除冗余两步操作</font>**

### 合并时面临的三种冲突

1. <font style="color:blue">命名冲突： 属性名，实体名和联系名之间存在冲突</font>
2. <font style="color:green">属性冲突：包括属性域冲突和属性取值单位冲突</font>
3. <font style="color:brown">概念冲突：指同一对象在一个局部应用中抽象为实体，在另一个局部应用中抽象为属性</font>

弱实体集：**没有键属性的实体集**

# 第七章 数据库保护

## 数据库保护内容

1.<font style="color:blue">数据库安全保护：利用权限机制</font>

2.<font style="color:red">数据库完整性约束与检查机制</font>

3.<font style="color:green">并发控制机制</font>

4.<font style="color:brown">数据库恢复</font>

## 事务

### 概念

**数据库的基本执行单元**，根本特征为其包含的操作序列要么全做，要么全不做。

### ACID性质 

1. 原子性
2. 一致性

3. 隔离性：一个事务内部的操作及使用的数据对并发的其他事务是隔离的
4. 持久性

### 事务的活动过程

1. 事务开始
2. 事务读/写
3. 事务提交
4. 事务回滚

## 事务的并发执行

### 带来的问题

> 原因：并发操作破坏了事务的隔离性

1. 丢失更新
2. 读“脏”数据
3. 不可重复读

<font style="color:red">**可串行性**</font>是并发事务正确性的准则

## 封锁

### 类型

1. 排它锁
2. 共享锁

### 封锁协议

1. 一级封锁协议
> 事务T在对数据A进行写操作之前，必须对A加X锁，直到事务结束才可释放X锁。
解决了 丢失更新问题

2. 二级封锁协议
> 在一级封锁协议上再添加一条规则，即事务T在读数据A之前必须先对A加S锁，<font style="color:red">读完后立即</font>释放S锁。
解决了 丢失更新问题 和 读“脏”数据问题

3. 三级封锁协议
> 在一级封锁协议上再添加一条规则，即事务T在读数据A之前必须先对A加S锁，<font style="color:red">直到事务结束</font>释放S锁。

解决了 丢失更新问题 和 读“脏”数据问题 和 不可重复读问题

# 简答题

## 1.

数据：描述事物的符号记录

数据库：长期存储在计算机内的，有组织的，可共享的数据集合

数据库管理系统：是位于用户与操作系统之间的具有数据定义、数据操纵、数据库的运行管理、数据库的建立和维护功能的一层数据管理软件。

数据库系统：在计算机系统中引入数据库后的系统，一般由数据库，数据库管理系统，应用系统，数据库管理员和用户组成。

## 2.

> 视图和基本表的区别和联系

视图是从一个或几个基本表导出的表，它与基本表不同，是一个虚表， 数据库中只存放视图的定义，而不存放视图对应的数据，这些数据存放 在原来的基本表中，当基本表中的数据发生变化，从视图中查询出的数 据也就随之改变（2 分）。视图一经定义就可以像基本表一样被查询、删 除，也可以在一个视图之上再定义新的视图，但是对视图的更新操作有 限制（1 分）。

## 3.

> 视图的作用

简化用户操作；使用户能够从不同角度看待同一数据；对重构数据库提供了一定程度的逻辑独立性；对机密数据提供安全防护。
